# Система телеметрии FHSS RX

## Описание
Система телеметрии автоматически собирает данные с датчиков и передаёт их через FHSS канал обратно к передатчику.

## Структура файлов
- `telemetry.h` - заголовочный файл с определениями
- `telemetry.ino` - реализация функций работы с датчиками
- `fhss_RX.ino` - основной файл приёмника с интеграцией телеметрии

## Поддерживаемые датчики
1. **MPU6050** - акселерометр и гироскоп
2. **BMP280** - барометрический датчик давления
3. **VL53L0X** - лазерный дальномер (TOF200C)

## Формат данных
Телеметрия передаётся частями для умещения в 24-байтный пакет:

### Формат пакетов:
1. **Акселерометр**: `A:x:y:z`
2. **Гироскоп**: `G:x:y:z` 
3. **Давление**: `P:value`
4. **Расстояние**: `D:value`

### Примеры пакетов:
```
A:1.2:4.5:7.8    - Акселерометр X:Y:Z (м/с²)
G:0.1:0.3:0.5    - Гироскоп X:Y:Z (рад/с)
P:1013           - Давление (гПа)
D:1500           - Расстояние (мм)
```

### Цикл передачи:
Пакеты передаются по очереди: A → G → P → D → A → ...

## Настройка пинов для ESP32-C6 Supermini
В файле `telemetry.h` настроены пины I2C:
```cpp
#define SDA_PIN 18
#define SCL_PIN 19
```

В файле `fhss_RX.ino` настроены пины SPI:
```cpp
#define NRF24_CE_PIN 7
#define NRF24_CSN_PIN 8
#define MOSI_PIN 14
#define MISO_PIN 15
#define SCK_PIN 9
```

## Частота обновления
- Данные с датчиков читаются каждые 50мс
- Телеметрия передаётся при каждом получении управляющего пакета
- Максимальная частота передачи телеметрии: 200Hz (каждые 5мс)

## Валидация данных
Система автоматически проверяет корректность данных:
- Акселерометр: -50 до +50 м/с²
- Гироскоп: -5000 до +5000 рад/с
- Давление: 500 до 1500 гПа
- Расстояние: 0 до 2000 мм (-1 для недействительных значений)

## Отладка
При инициализации в Serial Monitor будут выведены сообщения о статусе датчиков:
- `TELEMETRY: MPU6050 found!`
- `TELEMETRY: BMP280 found!`
- `TELEMETRY: VL53L0X found!`
- `TELEMETRY: All sensors initialized successfully!`

## Интеграция
Система автоматически интегрирована в `fhss_RX.ino`:
- Инициализация датчиков в `setup()`
- Чтение данных в `prepareAckTelemetry()`
- Передача через ACK payload
